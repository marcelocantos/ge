version: 2
project_name: ged

before:
  hooks:
    - mkdir -p ged/web/dist/assets
    - cp -r web/dist/. ged/web/dist/

builds:
  - main: .
    dir: ged
    binary: ged
    ldflags:
      - -s -w -X main.version={{.Version}}
    env:
      - CGO_ENABLED=0
    goos:
      - darwin
      - linux
    goarch:
      - amd64
      - arm64

archives:
  - name_template: "ged-{{ .Version }}-{{ .Os }}-{{ .Arch }}"
